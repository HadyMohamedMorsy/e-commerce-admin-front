<p-drawer
  [(visible)]="visible"
  [closable]="closable()"
  [closeOnEscape]="false"
  [modal]="model()"
  [styleClass]="isLoggedIn() ? 'sidebar' : 'sidebar logged-out'"
>
  <ng-template #header>
    @if (isLoggedIn()) {
      <img
        class="w-10rem slide-in-left"
        src="assets/media/logo/8x-bussness.png"
        alt=""
      />
    }
  </ng-template>
  <ng-template #content>
    @if (!isLoggedIn()) {
      <svg
        [style.visibility]="isLoggedIn() ? 'hidden' : 'visible'"
        xmlns="http://www.w3.org/2000/svg"
        width="400px"
        height="400px"
        id="Layer_2"
        data-name="Layer 2"
        viewBox="0 0 581.66 125.82"
      >
        <defs>
          <style>
            .cls-1 {
              fill: #fff6e5;
            }
          </style>
        </defs>
        <g id="Layer_1-2" data-name="Layer 1">
          <g>
            <g>
              <path
                class="cls-1"
                d="M65.28,34.69c5.57-5.7,12.03-12.72,19.92-14.95L65.46,0l-19.83,19.83c.54.19,1.07.39,1.61.6,6.94,2.43,12.97,9.15,18.05,14.26Z"
              />
              <path
                class="cls-1"
                d="M111.53,64.4c-.06-.07-.12-.12-.18-.18-3-2.87-6.95-4.46-11.12-4.46h-.16c-.12,0-.24,0-.38,0-4.86.16-8.59,2.93-13.02,7.37l-20.03,20.06c-1.31,1.31-2.68,2.81-4.14,4.4-4.34,4.75-9.27,10.13-15.42,13.64-.46.26-.92.51-1.38.75-.06.02-.11.06-.16.08l19.75,19.75,19.67-19.67.12-.12,2.52-2.51,23.93-23.93c4.19-4.2,4.23-11.02,0-15.19Z"
              />
              <path
                class="cls-1"
                d="M128.05,63.68c-1.61-3.69-3.9-6.98-6.81-9.77-5.68-5.45-13.13-8.44-21.02-8.44h-.26c-.23,0-.46,0-.73.02-4.63.15-8.89,1.38-13.03,3.78-3.1,1.8-6.08,4.19-9.66,7.78l-20.03,20.05c-1.52,1.53-3.07,3.22-4.57,4.86-3.81,4.17-7.75,8.47-11.96,10.87-.26.15-.52.29-.78.42-2.76,1.4-5.82,2.14-8.86,2.14-10.72,0-19.45-8.66-19.55-19.36l-.22-.22c-.65-.65-1.28-1.33-1.86-2.02-2.33-2.73-4.2-5.81-5.55-9.15-.17-.43-.34-.86-.49-1.29-.07.12-.12.25-.17.37-1.66,3.83-2.5,7.91-2.5,12.12s.8,8.07,2.39,11.82c1.52,3.62,3.72,6.87,6.5,9.65,2.78,2.78,6.03,4.98,9.65,6.5,3.74,1.59,7.72,2.39,11.82,2.39,4.73,0,9.49-1.15,13.76-3.31.41-.22.83-.44,1.23-.67,5.68-3.24,10.4-8.4,14.58-12.95,1.48-1.62,2.88-3.16,4.24-4.52l20.03-20.05c4.9-4.9,9.39-8.21,15.39-8.4.17,0,.32,0,.46,0h0c5.15-.05,10.02,1.88,13.72,5.42,3.87,3.71,6,8.72,6,14.1.02,10.44-8.46,18.97-19.35,19.57l-9.42,9.42c2.91.92,5.85,1.41,8.59,1.41.27,0,.55,0,.83-.02,8.07-.3,15.63-3.52,21.24-9.07,5.76-5.68,8.92-13.25,8.91-21.32,0-4.21-.86-8.28-2.53-12.1Z"
              />
              <path
                class="cls-1"
                d="M4.1,54.43c.13,1.63.4,3.25.8,4.84.35,1.39.79,2.77,1.33,4.11,1.23,3.01,2.9,5.78,5,8.26.54.62,1.1,1.23,1.69,1.82l1.23,1.23.17.17,13.76,13.75c2.51,2.51,6.34,3.15,9.51,1.56.02,0,.04-.02.06-.03.21-.1.42-.22.63-.34,3.73-2.12,7.49-6.22,11.11-10.19,1.52-1.66,3.09-3.39,4.68-4.97l20.03-20.06c3.8-3.8,7-6.37,10.38-8.32,4.65-2.7,9.44-4.09,14.66-4.26.3,0,.56-.02.82-.02h.28c8.79,0,17.11,3.34,23.44,9.41,1,.96,1.94,1.97,2.81,3.04.07-.83.1-1.66.1-2.5,0-3.95-.75-7.81-2.23-11.46-1.53-3.78-3.78-7.17-6.69-10.08-2.91-2.9-6.29-5.15-10.08-6.68-3.65-1.48-7.5-2.24-11.45-2.24s-7.81.75-11.46,2.24c-3.78,1.53-7.17,3.78-10.08,6.68l-9.29,9.29-9.29-9.29c-2.91-2.9-6.29-5.15-10.08-6.68-3.65-1.48-7.5-2.24-11.46-2.24s-7.8.75-11.45,2.24c-3.78,1.53-7.17,3.78-10.08,6.68-2.91,2.91-5.16,6.3-6.69,10.08-1.48,3.65-2.23,7.51-2.23,11.46,0,.83.03,1.66.1,2.48v.02Z"
              />
            </g>
            <g>
              <path
                class="cls-1"
                d="M165.72,101.11c-4.55-2.67-8.08-6.37-10.59-11.1-2.52-4.73-3.78-10.18-3.78-16.34s1.24-11.7,3.72-16.62c2.48-4.92,5.92-8.77,10.31-11.55,4.39-2.78,9.37-4.17,14.93-4.17,3.98,0,7.49.68,10.54,2.03,3.04,1.35,5.62,3.34,7.72,5.97v-6.65h17.47v62.43h-.23c-1.43-1.95-3.08-3.38-4.96-4.28-1.88-.9-4.06-1.35-6.54-1.35-1.65,0-3.17.21-4.56.62-1.39.41-2.99,1.03-4.79,1.86-2.55,1.05-4.75,1.84-6.59,2.37-1.84.52-4.19.79-7.04.79-5.86,0-11.06-1.33-15.61-4ZM191.92,86.8c2.25-1.31,4.02-3.16,5.3-5.52,1.28-2.37,1.92-5.05,1.92-8.06s-.64-5.69-1.92-8.06c-1.28-2.37-3.04-4.21-5.3-5.52-2.25-1.31-4.81-1.97-7.66-1.97s-5.41.66-7.66,1.97c-2.25,1.32-4.02,3.16-5.3,5.52-1.28,2.37-1.92,5.05-1.92,8.06s.64,5.69,1.92,8.06c1.28,2.37,3.04,4.21,5.3,5.52,2.25,1.32,4.81,1.97,7.66,1.97s5.41-.66,7.66-1.97Z"
              />
              <path
                class="cls-1"
                d="M224.83,103.31l28.06-45.75h-27.16v-14.88h55.11v.23l-28.17,45.75h28.29v14.88h-56.12v-.23Z"
              />
              <path
                class="cls-1"
                d="M298.7,101.11c-4.55-2.67-8.08-6.37-10.59-11.1-2.52-4.73-3.78-10.18-3.78-16.34s1.24-11.7,3.72-16.62c2.48-4.92,5.92-8.77,10.31-11.55,4.39-2.78,9.37-4.17,14.93-4.17,3.98,0,7.49.68,10.54,2.03,3.04,1.35,5.62,3.34,7.72,5.97v-6.65h17.47v62.43h-.23c-1.43-1.95-3.08-3.38-4.96-4.28-1.88-.9-4.06-1.35-6.54-1.35-1.65,0-3.17.21-4.56.62-1.39.41-2.99,1.03-4.79,1.86-2.55,1.05-4.75,1.84-6.59,2.37-1.84.52-4.19.79-7.04.79-5.86,0-11.06-1.33-15.61-4ZM324.9,86.8c2.25-1.31,4.02-3.16,5.3-5.52,1.28-2.37,1.92-5.05,1.92-8.06s-.64-5.69-1.92-8.06c-1.28-2.37-3.04-4.21-5.3-5.52-2.25-1.31-4.81-1.97-7.66-1.97s-5.41.66-7.66,1.97c-2.25,1.32-4.02,3.16-5.3,5.52-1.28,2.37-1.92,5.05-1.92,8.06s.64,5.69,1.92,8.06c1.28,2.37,3.04,4.21,5.3,5.52,2.25,1.32,4.81,1.97,7.66,1.97s5.41-.66,7.66-1.97Z"
              />
              <path class="cls-1" d="M362.54,20.71h18.03v82.83h-18.03V20.71Z" />
              <path
                class="cls-1"
                d="M406.2,101c-5-2.74-8.92-6.55-11.78-11.44-2.86-4.88-4.28-10.33-4.28-16.34s1.47-11.23,4.39-16.11c2.93-4.88,6.91-8.73,11.95-11.55,5.03-2.82,10.55-4.23,16.57-4.23s11.85,1.37,16.85,4.11c5,2.74,8.92,6.56,11.78,11.44,2.85,4.88,4.28,10.33,4.28,16.34s-1.47,11.23-4.39,16.11c-2.93,4.88-6.91,8.73-11.95,11.55-5.03,2.82-10.56,4.23-16.57,4.23s-11.85-1.37-16.85-4.11ZM430.83,86.8c2.25-1.31,4-3.16,5.24-5.52s1.86-5.05,1.86-8.06-.62-5.69-1.86-8.06-2.99-4.21-5.24-5.52c-2.25-1.31-4.85-1.97-7.78-1.97s-5.52.66-7.78,1.97c-2.25,1.32-4,3.16-5.24,5.52-1.24,2.37-1.86,5.05-1.86,8.06s.62,5.69,1.86,8.06c1.24,2.37,2.99,4.21,5.24,5.52,2.25,1.32,4.85,1.97,7.78,1.97s5.52-.66,7.78-1.97Z"
              />
              <path
                class="cls-1"
                d="M454.6,42.68h19.72l14.42,28.4,14.31-28.4h17.81l-32.91,62.32h-.34l-33.02-62.32Z"
              />
              <path
                class="cls-1"
                d="M534.95,101.34c-4.81-2.52-8.58-6.14-11.33-10.87-2.74-4.73-4.11-10.29-4.11-16.68s1.52-12.26,4.56-17.19c3.04-4.92,6.99-8.69,11.83-11.33,4.85-2.63,9.9-3.94,15.16-3.94,6.84,0,12.71,1.6,17.64,4.79,4.92,3.19,8.49,7.57,10.71,13.13,2.21,5.56,2.8,11.8,1.75,18.71h-43.27c.38,2.63,1.18,4.83,2.42,6.59,1.24,1.77,2.82,3.08,4.73,3.94,1.92.86,4.11,1.3,6.59,1.3,3.08,0,5.67-.68,7.78-2.03,2.1-1.35,3.72-3.34,4.85-5.97l15.44,5.18c-2.63,5.94-6.46,10.44-11.49,13.52-5.03,3.08-10.74,4.62-17.13,4.62-5.94,0-11.31-1.26-16.11-3.78ZM559.86,58.74c-2.18-1.84-5.07-2.76-8.68-2.76-3.16,0-5.82.9-8,2.7-2.18,1.8-3.76,4.36-4.73,7.66h25.24c-.38-3.23-1.65-5.76-3.83-7.61Z"
              />
            </g>
          </g>
        </g>
      </svg>
    }

    @if (isLoggedIn()) {
      @if (!openSetting()) {
        <ng-container
          [ngTemplateOutlet]="list"
          [ngTemplateOutletContext]="{
            lists: lists()
          }"
        ></ng-container>
      } @else {
        <ng-container
          [ngTemplateOutlet]="list"
          [ngTemplateOutletContext]="{
            lists: settingSections()
          }"
        ></ng-container>
      }
    }
  </ng-template>

  <ng-template #list let-lists="lists">
    <p-accordion [value]="[0]" [multiple]="true">
      @for (list of lists; track $index) {
        <p-accordion-panel [value]="$index">
          <p-accordion-header>
            <span
              class="slide-in-left-to-right"
              [ngStyle]="{
                'animation-delay': $index > 0 ? $index * 0.2 + 's' : '0s',
                opacity: '0'
              }"
            >
              {{ list.title }}
            </span>
          </p-accordion-header>
          <p-accordion-content>
            <ul class="flex flex-column gap-3 p-0">
              @for (item of list.items; track $index) {
                @if (item.visible) {
                  <li
                    class="slide-in-left-to-right"
                    [ngStyle]="{
                      'animation-delay': $index > 0 ? $index * 0.2 + 's' : '0s',
                      opacity: '0'
                    }"
                  >
                    @if (item.routerlink) {
                      <a
                        class="flex align-items-center gap-3 p-1"
                        [routerLink]="'/' + item.routerlink"
                        routerLinkActive="active-link-sidebar"
                        [routerLinkActiveOptions]="{ exact: true }"
                      >
                        <div
                          class="flex-shrink-0 w-2.5rem h-2.5rem border-round flex align-items-center justify-content-center text-white"
                          [style.background-color]="'' | randomColor"
                        >
                          {{ item.name | initials }}
                        </div>
                        <div class="info flex flex-column">
                          <h5
                            class="capitalize text-base text-white font-medium"
                          >
                            {{ item.name }}
                          </h5>
                        </div>
                      </a>
                    }
                  </li>
                }
              }
            </ul>
          </p-accordion-content>
        </p-accordion-panel>
      }
    </p-accordion>
  </ng-template>

  @if (isLoggedIn()) {
    <ng-template #footer>
      <div class="flex justify-content-end">
        <button
          pButton
          [icon]="!openSetting() ? 'pi pi-cog' : 'pi pi-list'"
          [rounded]="true"
          [outlined]="true"
          [text]="true"
          (click)="openSetting.set(!openSetting())"
          [pTooltip]="
            !openSetting() ? ('Settings' | translate) : ('list' | translate)
          "
          class="bg-primary-900 text-white"
        ></button>
      </div>
    </ng-template>
  }
</p-drawer>
